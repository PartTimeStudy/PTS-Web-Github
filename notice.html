<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공지사항</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div style="text-align: center; padding: 0px;">
        <div id="imageContainer" style="position: relative; display: inline-block; width: 100%; max-width: 600px;">
            <!-- <img id="noticeImage" src="assets/notice.png" alt="공지사항" style="width: 100%; height: auto;"> -->
            <div id="noticeImage" style="width: 100%; height: auto; background-color: #fff;"> 
                <div style="width: 100%; height: 300px;"> </div>
                <h1 style="width: 100%; text-align: center; color: #000;">공지사항 이미지</h1> 
                <div style="width: 100%; height: 300px;"> </div>
            </div>
            <div id="redBox" style="position: absolute; bottom: 0; left: 0; right: 0; background-color: red; opacity: 0.5; cursor: pointer;"></div>
        </div>
    </div>

    <div class="version-info" id="versionInfo"></div>

    <script src="js/shared.js"></script>
    <script src="js/notice.js"></script>
    <script>
        // 버전 정보 표시
        document.getElementById('versionInfo').textContent = `v${APP_VERSION} (${BUILD_DATE})`;

        // 페이지 로드 시 접속 로그 저장 및 빨간색 박스 높이 설정
        document.addEventListener('DOMContentLoaded', async () => {
            // 접속 로그 저장 (인증된 경우에만)
            const token = checkAuth();
            if (token) {
                try {
                    await saveAccessLog();
                } catch (error) {
                    // 접속 로그 저장 실패는 치명적이지 않으므로 에러 무시
                    console.error('접속 로그 저장 실패:', error);
                }
            }

            // 컨테이너 너비 기준으로 빨간색 박스 높이 설정 (너비의 25%)
            const imageContainer = document.getElementById('imageContainer');
            const redBox = document.getElementById('redBox');
            
            function setRedBoxHeight() {
                const containerWidth = imageContainer.offsetWidth;
                const boxHeight = containerWidth * 0.25; // 25% (600px 기준 150px)
                redBox.style.height = boxHeight + 'px';
            }

            // 초기 높이 설정
            setRedBoxHeight();

            // 윈도우 리사이즈 시에도 높이 재계산
            window.addEventListener('resize', setRedBoxHeight);

            // 빨간색 박스 클릭 시 withdrawal 페이지로 이동
            redBox.addEventListener('click', () => {
                // 토큰 확인
                const token = checkAuth();
                if (!token) {
                    window.location.href = 'login.html';
                    return;
                }

                // withdrawal 페이지로 이동
                window.location.href = 'withdrawal.html';
            });
        });
    </script>
</body>
</html>

