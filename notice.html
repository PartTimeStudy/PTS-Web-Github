<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공지사항</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div style="text-align: center; padding: 0px;">
        <div id="imageContainer" style="position: relative; display: inline-block; width: 100%; max-width: 600px;">
            <img id="noticeImage" src="assets/notice.png" alt="공지사항" style="width: 100%; height: auto;">
            <!-- <div id="noticeImage" style="width: 100%; height: auto; background-color: #fff;"> 
                <div style="width: 100%; height: 300px;"> </div>
                <h1 style="width: 100%; text-align: center; color: #000;">공지사항 이미지</h1> 
                <div style="width: 100%; height: 300px;"> </div>
            </div> -->
        </div>
    </div>

    <!-- 플로팅 버튼 -->
    <button id="floatingBtn" class="floating-btn">채권자 등록하기</button>

    <div class="version-info" id="versionInfo"></div>

    <script src="js/shared.js"></script>
    <script src="js/notice.js"></script>
    <script>
        // 버전 정보 표시 (dev 환경에서만)
        const versionInfoEl = document.getElementById('versionInfo');
        if (isDevEnvironment()) {
            versionInfoEl.textContent = `v${APP_VERSION} (${BUILD_DATE})`;
        } else {
            versionInfoEl.style.display = 'none';
        }

        // 페이지 로드 시 접속 로그 저장 및 플로팅 버튼 이벤트 설정
        document.addEventListener('DOMContentLoaded', async () => {
            // 접속 로그 저장 (인증된 경우에만)
            const token = checkAuth();
            if (token) {
                try {
                    await saveAccessLog();
                } catch (error) {
                    // 접속 로그 저장 실패는 치명적이지 않으므로 에러 무시
                    console.error('접속 로그 저장 실패:', error);
                }
            }

            // 이미지 기준 크기 (375px)에 맞춰 버튼 크기 조정
            const imageContainer = document.getElementById('imageContainer');
            const floatingBtn = document.getElementById('floatingBtn');
            const BASE_IMAGE_WIDTH = 375;
            const BASE_BUTTON_WIDTH = 327;
            const BASE_BUTTON_HEIGHT = 54;
            const BASE_BUTTON_RADIUS = 11.54;

            function adjustButtonSize() {
                const containerWidth = imageContainer.offsetWidth;
                const scale = containerWidth / BASE_IMAGE_WIDTH;
                
                floatingBtn.style.width = (BASE_BUTTON_WIDTH * scale) + 'px';
                floatingBtn.style.height = (BASE_BUTTON_HEIGHT * scale) + 'px';
                floatingBtn.style.borderRadius = (BASE_BUTTON_RADIUS * scale) + 'px';
                floatingBtn.style.fontSize = (16 * scale) + 'px';
            }

            // 초기 크기 설정
            adjustButtonSize();

            // 윈도우 리사이즈 시에도 크기 재계산
            window.addEventListener('resize', adjustButtonSize);

            // 플로팅 버튼 클릭 시 withdrawal 페이지로 이동
            floatingBtn.addEventListener('click', () => {
                // 토큰 확인
                const token = checkAuth();
                if (!token) {
                    window.location.href = 'login.html';
                    return;
                }
                // withdrawal 페이지로 이동
                window.location.href = 'withdrawal.html';
            });
        });
    </script>
</body>
</html>

